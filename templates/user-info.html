{% extends 'base.html' %}

{% block head %}{% endblock %}

{% block content %}

<h3>{{ user.fname }} {{ user.lname }}</h3>
<div>{{ user.email }}</div>

<ul class="nav nav-tabs">
    <li class="active"><a data-toggle="tab" href="#home">Home</a></li>
    <li><a data-toggle="tab" href="#info">Info</a><li>
</ul>

<div class="tab-content">
    <div id="home" class="tab-pane fade in active">
        <div>You've Spotted the following breeders:</div>
            {% for breeder, litters in breeder_spots %}
            <ul>
                <li>
                    <a href='/breeders/{{ breeder.breeder_id }}'>{{ breeder.name }}</a>
                    <div>Breeds:
                        {% for group in litters|groupby('breed') %}
                            {% if loop.last %}
                                <a href='/breeds/{{ group.grouper.breed_id }}'>{{ group.grouper.name }}</a>
                            {% else %}
                                <a href='/breeds/{{ group.grouper.breed_id }}'>{{ group.grouper.name }}, </a>
                            {% endif %}
                        {% endfor %}
                    </div>
                    <img src="{{ breeder.photos[0].photo }}" width="125" height="125">
                    <div>New Litters:</div>
                    <ul>
                    <div>{% for litter in litters %}
                        {% if litter.date_available > date_filter %}
                            <li><a href='/breeders/{{ breeder.breeder_id }}/litters/{{ litter.litter_id }}'>{{ litter.date_born.strftime('%m/%d/%y') }}</a> - {{ litter.num_pups }} puppies</li>
                        {% endif %}
                    {% endfor %}</div>
                    </ul>
                    <div>Events:</div>
                    <ul>
                        <div>{% for event in breeder.events %}
                                {% if event.date > date_filter %}
                                    <li><a href='/breeders/{{ breeder.breeder_id }}/events/{{ event.event_id }}'>{{ event.name }}</a> {{ event.date.strftime('%m/%d/%y') }}</li>
                                {% endif %}
                            {% endfor %}
                        </div>
                    </ul>
                </li>
            </ul>
            {% endfor %}
        <div>You've Spotted the following breeds:</div>
            {% for breed in breed_spots %}
            <ul>
                <li>
                    <a href='/breeds/{{ breed.breed_id }}'>{{ breed.name }}</a> - {{ breed.description }}
                    <div><img src='{{ breed.photo }}' width="125" height="125"></div>
                    <form action='/breeder-search'>
                        <input type="submit" name="search" value="Search for Breeders">
                        <input type="hidden" name="breed" value="{{ breed.breed_id }}">
                        <input type="hidden" name="location" value="{{ user.zipcode }}">
                    </form>
                </li>
            </ul>
            {% endfor %}
    </div>

    <div id="info" class="tab-pan fade">
        <form id="user-updates" action='/user-updates' method="POST">
            <div>First Name: <input type="text" name="fname" id="fname-field" placeholder="{{ user.fname }}"></div>
            <div>Last Name: <input type="text" name="lname" id="lname-field" placeholder="{{ user.lname }}"></div>
            <div>Email: <input type="text" name="email" id="email-field" placeholder="{{ user.email }}"></div>
            <div>Password: <input type="password" name="password" id="pwd-field" placeholder="******"></div>
            <div>Zipcode: <input type="text" name="zipcode" id="zipcode-field" placeholder="{{ user.zipcode }}"></div>
            <div>Phone: <input type="text" name="phone" id="phone-field" placeholder="{{ user.phone }}"></div>
            <input type="hidden" name="user" id="user-field" value="{{ user.user_id }}">
            <input type="submit" name="update" value="Submit Changes">
        </form>
    </div>

</div>

<script src="/static/js/user-updates.js"></script>

{% endblock %}




